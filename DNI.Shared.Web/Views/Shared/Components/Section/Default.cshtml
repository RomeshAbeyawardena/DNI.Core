@using DNI.Shared.Services;
@model SectionViewComponentModel

@{
    var identifier = Html.Switch(Switch.Create<SectionType, string>()
        .CaseWhen(SectionType.Section,"section")
        .CaseWhen(SectionType.Block,"div")
        .CaseWhen(SectionType.Segment,"li"), Model.Type);

    var replacedContent = Html.Raw(Model.Content);

    if(Model.Sections != null)
        foreach (var section in Model?.Sections)
            replacedContent = replacedContent.Replace(Html, $"[!{section.Name}]", await Component.InvokeAsync<SectionViewComponent>());
}

    <@identifier class="@identifier--@Model.Container">
        @replacedContent
    </@identifier>
